# Write-Back (Write-Behind) Cache Pattern

–≠—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω **Write-Back Cache** (—Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–∫ Write-Behind). 

–î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è **—Å–Ω–∞—á–∞–ª–∞ –≤ –∫—ç—à**, –∞ –∑–∞—Ç–µ–º **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—á–µ–Ω—å –≤—ã—Å–æ–∫—É—é 
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏.

–ü–∞—Ç—Ç–µ—Ä–Ω Write-Back —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 2 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤:
1. **–ß—Ç–µ–Ω–∏–µ** - –∫–∞–∫ –≤ Cache-Aside (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à)
2. **–ó–∞–ø–∏—Å—å** - –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –≤ –∫—ç—à, –ø–æ—Ç–æ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –ë–î

## üìä –ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ—Ä:

```
1Ô∏è‚É£ –ß–¢–ï–ù–ò–ï: CACHE MISS ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
2Ô∏è‚É£ –ü–û–í–¢–û–†–ù–û–ï –ß–¢–ï–ù–ò–ï: CACHE HIT ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞
3Ô∏è‚É£ –ó–ê–ü–ò–°–¨: WRITE-BACK ‚Üí –∑–∞–ø–∏—Å—å –≤ –∫—ç—à ‚Üí –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ –ë–î (—á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥)
4Ô∏è‚É£ –§–û–ù–û–í–´–ô –ü–†–û–¶–ï–°–°: –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç "–≥—Ä—è–∑–Ω—ã–µ" –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –≤ –ë–î
```

### macOS / Linux –ö–æ–º–∞–Ω–¥—ã
#### 1Ô∏è‚É£ –ü–û–õ–£–ß–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (—á—Ç–µ–Ω–∏–µ)
```bash
curl "http://localhost:8084/api/users/1"
```

#### 2Ô∏è‚É£ –°–û–ó–î–ê–¢–¨ –ù–û–í–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (Write-Back)
```bash
curl -X POST "http://localhost:8084/api/users" \
  -H "Content-Type: application/json" \
  -d '{"name":"David","email":"david@example.com"}'
```

#### 3Ô∏è‚É£ –û–ë–ù–û–í–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (Write-Back)
```bash
curl -X PUT "http://localhost:8084/api/users/1?name=Alice%20Updated&email=alice.updated@example.com"
```

#### 4Ô∏è‚É£ –£–î–ê–õ–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (Write-Back)
```bash
curl -X DELETE "http://localhost:8084/api/users/1"
```

#### 5Ô∏è‚É£ –ü–†–û–°–ú–û–¢–† –°–û–°–¢–û–Ø–ù–ò–Ø –ö–≠–®–ê
```bash
curl "http://localhost:8084/api/users/cache/show"
```

#### 6Ô∏è‚É£ –ü–†–û–°–ú–û–¢–† –°–û–°–¢–û–Ø–ù–ò–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•
```bash
curl "http://localhost:8084/api/users/database/show"
```

#### 7Ô∏è‚É£ –û–ß–ò–°–¢–ö–ê –í–°–ï–ì–û –ö–≠–®–ê
```bash
curl -X POST "http://localhost:8084/api/users/cache/clear"
```

### Windows –ö–æ–º–∞–Ω–¥—ã
#### 1Ô∏è‚É£ –ü–û–õ–£–ß–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (—á—Ç–µ–Ω–∏–µ)
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users/1" -Method GET
```

#### 2Ô∏è‚É£ –°–û–ó–î–ê–¢–¨ –ù–û–í–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (Write-Back)
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users" -Method POST -Body '{"name":"David","email":"david@example.com"}' -ContentType "application/json"
```

#### 3Ô∏è‚É£ –û–ë–ù–û–í–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (Write-Back)
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users/1?name=Alice%20Updated&email=alice.updated@example.com" -Method PUT
```

#### 4Ô∏è‚É£ –£–î–ê–õ–ò–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (Write-Back)
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users/1" -Method DELETE
```

#### 5Ô∏è‚É£ –ü–†–û–°–ú–û–¢–† –°–û–°–¢–û–Ø–ù–ò–Ø –ö–≠–®–ê
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users/cache/show" -Method GET
```

#### 6Ô∏è‚É£ –ü–†–û–°–ú–û–¢–† –°–û–°–¢–û–Ø–ù–ò–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–•
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users/database/show" -Method GET
```

#### 7Ô∏è‚É£ –û–ß–ò–°–¢–ö–ê –í–°–ï–ì–û –ö–≠–®–ê
```bash
Invoke-RestMethod -Uri "http://localhost:8084/api/users/cache/clear" -Method POST
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Write-Back:
- ‚úÖ **–û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏** - —Ç–æ–ª—å–∫–æ –≤ –∫—ç—à
- ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π** - –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è write-heavy –Ω–∞–≥—Ä—É–∑–æ–∫** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå **–†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö** - –µ—Å–ª–∏ –∫—ç—à —É–ø–∞–¥–µ—Ç –¥–æ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
- ‚ùå **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏** - –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã
- ‚ùå **–ó–∞–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** - –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚ùå **–°–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- üîπ Write-heavy –Ω–∞–≥—Ä—É–∑–∫–∏
- üîπ –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- üîπ –î–ª—è –ª–æ–≥–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- üîπ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏

## üìà –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

```
–û–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è:
–ö–ª–∏–µ–Ω—Ç ‚Üí Controller ‚Üí Service 
                    ‚Üì
               –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à? ‚Äî –ù–ï–¢ ‚Äî‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î ‚Äî‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à
                    ‚Üì –î–ê
               –í–µ—Ä–Ω—É—Ç—å –∏–∑ –∫—ç—à–∞
                    ‚Üì
                 –ö–ª–∏–µ–Ω—Ç

–û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏:
–ö–ª–∏–µ–Ω—Ç ‚Üí Controller ‚Üí Service 
                    ‚Üì
         –ó–∞–ø–∏—Å–∞—Ç—å –≤ –∫—ç—à ‚Äî‚Üí –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ë–î (—á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥)
              ‚Üì               ‚è±Ô∏è
           –£—Å–ø–µ—Ö           –§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
              ‚Üì               ‚Üì
                 –ö–ª–∏–µ–Ω—Ç
```
