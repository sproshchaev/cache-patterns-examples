# Cache-Aside Pattern

–≠—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω **Cache-Aside** (—Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–∫ Lazy Loading Cache).

–ü–∞—Ç—Ç–µ—Ä–Ω Cache-Aside —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —à–∞–≥–æ–≤:
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à** - —Å–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ
2. **Cache Miss** - –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à** - –ø–æ–º–µ—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à –¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üìä –ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ—Ä:

```
1Ô∏è‚É£ –ü–ï–†–í–´–ô –ó–ê–ü–†–û–°: CACHE MISS ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
2Ô∏è‚É£ –í–¢–û–†–û–ô –ó–ê–ü–†–û–°: CACHE HIT ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞
3Ô∏è‚É£ –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–•: –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞
4Ô∏è‚É£ –ü–û–°–õ–ï –û–ë–ù–û–í–õ–ï–ù–ò–Ø: —Å–Ω–æ–≤–∞ CACHE MISS –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

### macOS / Linux –ö–æ–º–∞–Ω–¥—ã
#### 1Ô∏è‚É£ –ü–ï–†–í–´–ô –ó–ê–ü–†–û–° - CACHE MISS (–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î)
```bash
curl "http://localhost:8080/api/users/1"
```

#### 2Ô∏è‚É£ –í–¢–û–†–û–ô –ó–ê–ü–†–û–° - CACHE HIT (–¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞)
```bash
curl "http://localhost:8080/api/users/1"
```

#### 3Ô∏è‚É£ –ó–ê–ü–†–û–° –î–†–£–ì–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø - CACHE MISS
```bash
curl "http://localhost:8080/api/users/2"
```

#### 4Ô∏è‚É£ –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• (–∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à)
```bash
curl -X PUT "http://localhost:8080/api/users/1?name=Alice%20Updated&email=alice.new@example.com"
```

#### 5Ô∏è‚É£ –ü–û–í–¢–û–†–ù–´–ô –ó–ê–ü–†–û–° - –°–ù–û–í–ê CACHE MISS (–ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
```bash
curl "http://localhost:8080/api/users/1"
```

#### 6Ô∏è‚É£ –û–ß–ò–°–¢–ö–ê –í–°–ï–ì–û –ö–≠–®–ê
```bash
curl -X POST "http://localhost:8080/api/users/cache/clear"
```

#### 7Ô∏è‚É£ –ü–†–û–°–ú–û–¢–† –°–û–°–¢–û–Ø–ù–ò–Ø –ö–≠–®–ê
```bash
curl "http://localhost:8080/api/users/cache/show"
```

### Windows –ö–æ–º–∞–Ω–¥—ã
#### 1Ô∏è‚É£ –ü–ï–†–í–´–ô –ó–ê–ü–†–û–° - CACHE MISS
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/1" -Method GET
```

#### 2Ô∏è‚É£ –í–¢–û–†–û–ô –ó–ê–ü–†–û–° - CACHE HIT
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/1" -Method GET
```

#### 3Ô∏è‚É£ –ó–ê–ü–†–û–° –î–†–£–ì–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø - CACHE MISS
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/2" -Method GET
```

#### 4Ô∏è‚É£ –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• (–∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à)
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/1?name=Alice%20Updated&email=alice.new@example.com" -Method PUT
```

#### 5Ô∏è‚É£ –ü–û–í–¢–û–†–ù–´–ô –ó–ê–ü–†–û–° - –°–ù–û–í–ê CACHE MISS
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/1" -Method GET
```

#### 6Ô∏è‚É£ –û–ß–ò–°–¢–ö–ê –í–°–ï–ì–û –ö–≠–®–ê
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/cache/clear" -Method POST
```

#### 7Ô∏è‚É£ –ü–†–û–°–ú–û–¢–† –°–û–°–¢–û–Ø–ù–ò–Ø –ö–≠–®–ê
```bash
Invoke-RestMethod -Uri "http://localhost:8080/api/users/cache/show" -Method GET
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Cache-Aside:
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤** - –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–æ—Å—Ç—É–ø–µ** - –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- ‚ùå **–ö—ç—à-–ø—Ä–æ–ø—É—Å–∫–∏** - –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ø–æ—Å–ª–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ùå **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏** - –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- üîπ Read-heavy –Ω–∞–≥—Ä—É–∑–∫–∏
- üîπ –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
- üîπ –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ –∑–∞–¥–µ—Ä–∂–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

## üìà –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

```
–ö–ª–∏–µ–Ω—Ç ‚Üí Controller ‚Üí Service 
                    ‚Üì
               –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à? ‚Äî –ù–ï–¢ ‚Äî‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –ë–î ‚Äî‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à
                    ‚Üì –î–ê
               –í–µ—Ä–Ω—É—Ç—å –∏–∑ –∫—ç—à–∞
                    ‚Üì
                 –ö–ª–∏–µ–Ω—Ç
```
